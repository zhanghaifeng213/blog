webpackJsonp([13],{"0tMT":function(e,t,n){e.exports=function(e){return function(){return n("Opzk")("./"+e+".vue")}}},IcnI:function(e,t,n){"use strict";var a=n("7+uW"),r=n("NYxO"),o=n("//Fk"),u=n.n(o),c=n("vMJZ"),i=n("wxfA"),s={state:{username:Object(i.d)(),avatorImgPath:"",uid:Object(i.c)(),role:""},mutations:{setAvatar:function(e,t){t&&(e.avatorImgPath="http://localhost:3000/"+t.slice(1))},setRole:function(e,t){e.role=t},setUsername:function(e,t){e.username=t,Object(i.e)(t)},setUid:function(e,t){e.uid=t}},getters:{usernameLen:function(e){return e.username.length}},actions:{handleLogin:function(e,t){var n=e.commit,a=t.username,r=t.password;return a=a.trim(),new u.a(function(e,t){Object(c.b)({username:a,password:r}).then(function(r){"success"===r.data.status?(n("setUsername",a),e(r.data.data)):t(r.data.data)}).catch(function(e){t(e)})})},handleLogOut:function(e){e.state;var t=e.commit;return new u.a(function(e,n){Object(c.c)().then(function(){Object(i.a)(),t("setUsername",""),t("setUid",""),t("setRole",""),t("setAvatar",""),e(!0)}).catch(function(e){n(e)})})},handleUserInfo:function(e,t){var n=e.commit,a=Object(i.d)();return new u.a(function(e,t){Object(c.a)(a).then(function(t){var a=t.data.data;n("setAvatar",a.avatar),n("setRole",a.role),n("setUid",a.uid),e(a)}).catch(function(e){t(e)})})}}},l=n("jNIo"),d=n.n(l);a.default.use(r.a);t.a=new r.a.Store({state:{},mutations:{},actions:{},modules:{user:s,app:d.a}})},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},o=n("VU/8")({name:"App"},r,!1,null,null,null).exports,u=n("YaEn"),c=n("IcnI"),i=n("zL8q"),s=n.n(i);n("tvR6"),n("d4tr");a.default.use(s.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:u.a,store:c.a,components:{App:o},template:"<App/>"})},Opzk:function(e,t,n){var a={"./404.vue":["+H76",10],"./article-detail.vue":["AMa1",0,9],"./common/login-and-out.vue":["+Y/D",0],"./home.vue":["26dS",2,0],"./layout/head-nav.vue":["3Nxj",0,6],"./layout/main.vue":["5Zhu",3,0],"./persional-detail/article.vue":["yjxu",4],"./persional-detail/comment.vue":["pldp",8],"./persional-detail/user.vue":["h9Gl",5],"./persional-detail/userface.vue":["IoJA",7],"./persional.vue":["Ar58",11],"./publish-article.vue":["nbFB",1,0]};function r(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}r.keys=function(){return Object.keys(a)},r.id="Opzk",e.exports=r},YaEn:function(e,t,n){"use strict";var a=n("7+uW"),r=n("/ocq"),o=n("IcnI"),u=n("lbHh"),c=n.n(u),i=n("wxfA");a.default.use(r.a);var s=n("0tMT"),l=[{path:"/404",component:s("404"),name:"404",meta:{title:"404未找到"}}],d={path:"/",component:s("layout/main"),name:"main",redirect:{name:"home"},meta:{title:"主入口整体布局"},children:[{path:"/home",component:s("home"),name:"home",meta:{title:"首页"}},{path:"/article-detail",component:s("article-detail"),name:"article-detail"},{path:"/publish-article",component:s("publish-article"),name:"publish-article"},{path:"/persional",component:s("persional"),name:"persional",meta:{title:"persional"},redirect:{name:"user"},children:[{path:"/user",component:s("persional-detail/user"),name:"user"},{path:"/article",component:s("persional-detail/article"),name:"article"},{path:"/comment",component:s("persional-detail/comment"),name:"comment"},{path:"/userface",component:s("persional-detail/userface"),name:"userface"}]}],beforeEnter:function(e,t,n){var a=c.a.get("username");a&&/\S/.test(a)?o.a.state.user.roleId?(console.log("hasGetInfo"),n()):(console.log("donthasGetInfo"),o.a.dispatch("handleUserInfo").then(function(){n()}).catch(function(){Object(i.a)(),n()})):(Object(i.a)(),n())}},m=new r.a({mode:"hash",scrollBehavior:function(){return{y:0}},isAddDynamicMenuRoutes:!1,routes:l.concat(d)});t.a=m},ZhVd:function(e,t,n){"use strict";var a=n("//Fk"),r=n.n(a),o=(n("7+uW"),n("mtWM")),u=n.n(o),c=n("YaEn"),i=n("wxfA"),s=u.a.create({timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"},"Content-Type":"application/json; charset=utf-8"});s.interceptors.request.use(function(e){return e.headers.token=Object(i.b)("token"),e},function(e){return r.a.reject(e)}),s.interceptors.response.use(function(e){return e.data&&401===e.data.code&&(Object(i.a)(),c.a.push({name:"home"})),e},function(e){return r.a.reject(e)}),s.adornUrl=function(e){return"http://localhost:3000/"+e},t.a=s},d4tr:function(e,t){},jNIo:function(e,t){},tvR6:function(e,t){},vMJZ:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return i});var a=n("ZhVd"),r=function(e){return Object(a.a)({url:a.a.adornUrl("user/reg"),method:"post",data:e})},o=function(e){return Object(a.a)({url:a.a.adornUrl("user/login"),method:"post",data:e})},u=function(e){return Object(a.a)({url:a.a.adornUrl("user/info"),method:"get",data:e})},c=function(){return Object(a.a)({url:a.a.adornUrl("user/logout"),method:"get"})},i=function(e){return Object(a.a)({url:a.a.adornUrl("upload"),method:"post",data:e})}},wxfA:function(e,t,n){"use strict";t.a=function(){r.a.remove("username"),r.a.remove("uid")},n.d(t,"b",function(){return o}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return i});n("7+uW"),n("YaEn"),n("IcnI");var a=n("lbHh"),r=n.n(a);var o=function(){var e=r.a.get("token");return e||!1},u=function(e){r.a.set("username",e)},c=function(){var e=r.a.get("username");return console.log(e),e||!1},i=function(){var e=r.a.get("uid");return console.log(e),e||!1}}},["NHnr"]);
//# sourceMappingURL=app.f0d69afc5b835d9b80f4.js.map